<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>my-dearest-peter-xoxo</title>
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ„</text></svg>"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Roboto", sans-serif;
        overflow: hidden;
        background: linear-gradient(
          to bottom,
          #0a1628 0%,
          #1a2744 50%,
          #2d3e5c 100%
        );
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
      }

      /* ëˆˆì†¡ì´ */
      .snowflake {
        position: fixed;
        top: -10px;
        color: rgba(255, 255, 255, 0.9);
        font-size: 1em;
        user-select: none;
        z-index: 1000;
        animation: fall linear infinite;
        text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
      }

      @keyframes fall {
        to {
          transform: translateY(100vh) rotate(360deg);
        }
      }

      /* ì»¨í…Œì´ë„ˆ */
      .container {
        position: relative;
        width: 100%;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      /* íŠ¸ë¦¬ ì´ë¯¸ì§€ */
      .tree-image {
        max-width: 90%;
        max-height: 90vh;
        width: auto;
        height: auto;
        cursor: pointer;
        transition: opacity 1s ease;
        z-index: 10;
        position: relative;
        user-select: none;
        -webkit-user-drag: none;
        outline: none;
        -webkit-tap-highlight-color: transparent;
      }

      .tree-image:hover {
        filter: brightness(1.02);
      }

      .tree-image:active {
        transform: none;
      }

      .tree-image.fade-out {
        opacity: 0;
      }

      .tree-image.hidden {
        display: none;
      }

      /* Click Me íŒíŠ¸ */
      .click-hint {
        position: absolute;
        bottom: 15%;
        left: 50%;
        transform: translateX(-50%);
        color: rgba(255, 255, 255, 0.9);
        font-size: 1.3em;
        font-weight: 500;
        letter-spacing: 2px;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        animation: pulse 2s ease-in-out infinite;
        z-index: 15;
        pointer-events: none;
        opacity: 1;
        transition: opacity 0.5s ease;
      }

      .click-hint.hidden {
        opacity: 0;
        visibility: hidden;
        pointer-events: none;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 0.7;
          transform: translateX(-50%) translateY(0);
        }
        50% {
          opacity: 1;
          transform: translateX(-50%) translateY(-5px);
        }
      }

      /* í°ìƒ‰ í¸ì§€ì§€ */
      .letter-paper {
        position: fixed;
        width: 85%;
        height: 85vh;
        max-width: 800px;
        max-height: 700px;
        background: #ffffff;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.8);
        opacity: 0;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
        overflow: hidden;
        transition: all 1s ease;
        z-index: 50;
        pointer-events: none;
        padding: 20px;
      }

      .letter-paper.show {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
        pointer-events: auto;
      }

      /* ì•ˆìª½ ê¸ˆìƒ‰ í…Œë‘ë¦¬ - ë™ì ìœ¼ë¡œ í‘œì‹œ/ìˆ¨ê¹€ */
      /* ìƒë‹¨ í…Œë‘ë¦¬ */
      .letter-paper::before {
        content: "";
        position: absolute;
        top: 20px;
        left: 22px;
        right: 22px;
        height: 2px;
        background: #e6c363;
        pointer-events: none;
        z-index: 10;
        transition: opacity 0.3s ease;
      }

      /* ì¢Œìš° í…Œë‘ë¦¬ */
      .letter-paper::after {
        content: "";
        position: absolute;
        top: 20px;
        bottom: 20px;
        left: 20px;
        right: 20px;
        border-left: 2px solid #e6c363;
        border-right: 2px solid #e6c363;
        pointer-events: none;
        z-index: 10;
      }

      /* ìŠ¤í¬ë¡¤ ì‹œ ìƒë‹¨ í…Œë‘ë¦¬ ìˆ¨ê¹€ */
      .letter-paper.scrolled-top::before {
        opacity: 0;
      }

      /* í•˜ë‹¨ í…Œë‘ë¦¬ ë³„ë„ ìš”ì†Œ */
      .letter-border-bottom {
        position: absolute;
        bottom: 20px;
        left: 22px;
        right: 22px;
        height: 2px;
        background: #e6c363;
        pointer-events: none;
        z-index: 10;
        transition: opacity 0.3s ease;
      }

      /* ìŠ¤í¬ë¡¤ ì‹œ í•˜ë‹¨ í…Œë‘ë¦¬ ìˆ¨ê¹€ */
      .letter-paper.scrolled-bottom .letter-border-bottom {
        opacity: 0;
      }

      /* ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•œ ë‚´ìš© ì˜ì—­ */
      .letter-scroll {
        width: 100%;
        height: 100%;
        overflow-y: auto;
        padding: 5px 10px;
        position: relative;
        z-index: 2;
      }

      /* í¸ì§€ ë‚´ìš© */
      .letter-content {
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 1s ease 0.5s, transform 1s ease 0.5s;
        padding: 40px 35px;
      }

      .letter-paper.show .letter-content {
        opacity: 1;
        transform: translateY(0);
      }

      .letter-content h1 {
        color: #333;
        text-align: center;
        margin-bottom: 40px;
        font-size: 2.5em;
        font-weight: normal;
        letter-spacing: 2px;
      }

      .letter-content p {
        line-height: 2.6;
        color: #444;
        margin-bottom: 25px;
        font-style: italic;
        font-size: 1.2em;
        text-align: justify;
      }

      .letter-content .signature {
        text-align: right;
        margin-top: 50px;
        font-style: italic;
        color: #666;
        font-size: 1.3em;
      }

      /* ì˜¤ë””ì˜¤ ì»¨íŠ¸ë¡¤ */
      .audio-control {
        position: fixed;
        top: 25px;
        left: 25px;
        width: 45px;
        height: 45px;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        z-index: 2000;
        transition: all 0.3s ease;
        opacity: 0.6;
      }

      .audio-control:hover {
        opacity: 1;
        background: rgba(255, 255, 255, 0.15);
        transform: scale(1.05);
      }

      .audio-control::before {
        content: "ğŸ”Š";
        font-size: 18px;
        filter: grayscale(0.3);
      }

      .audio-control.muted {
        opacity: 0.4;
      }

      .audio-control.muted::before {
        content: "ğŸ”‡";
      }

      /* ë°˜ì‘í˜• */
      @media (max-width: 768px) {
        .tree-image {
          max-width: 95%;
        }

        .letter-paper {
          width: 90%;
          height: 80vh;
          padding: 15px;
        }

        .letter-paper::before {
          top: 12px;
          left: 14px;
          right: 14px;
        }

        .letter-paper::after {
          top: 12px;
          bottom: 12px;
          left: 12px;
          right: 12px;
        }

        .letter-border-bottom {
          bottom: 12px;
          left: 14px;
          right: 14px;
        }

        .letter-content {
          padding: 30px 25px;
        }

        .letter-content h1 {
          font-size: 1.8em;
          margin-bottom: 30px;
        }

        .letter-content p {
          font-size: 1.05em;
          line-height: 1.8;
        }

        .letter-content .signature {
          font-size: 1.1em;
          margin-top: 40px;
        }

        .audio-control {
          width: 40px;
          height: 40px;
          top: 20px;
          left: 20px;
        }

        .audio-control::before {
          font-size: 16px;
        }

        .click-hint {
          font-size: 1.1em;
          bottom: 10%;
        }
      }

      @media (max-width: 480px) {
        .letter-paper {
          padding: 12px;
        }

        .letter-paper::before {
          top: 10px;
          left: 12px;
          right: 12px;
        }

        .letter-paper::after {
          top: 10px;
          bottom: 10px;
          left: 10px;
          right: 10px;
        }

        .letter-border-bottom {
          bottom: 10px;
          left: 12px;
          right: 12px;
        }

        .letter-content {
          padding: 25px 20px;
        }

        .letter-content h1 {
          font-size: 1.5em;
          margin-bottom: 25px;
        }

        .letter-content p {
          font-size: 0.95em;
          line-height: 1.7;
          margin-bottom: 20px;
        }

        .letter-content .signature {
          font-size: 1em;
          margin-top: 30px;
        }

        .click-hint {
          font-size: 0.95em;
          bottom: 8%;
        }
      }

      /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¹€ */
      .letter-scroll::-webkit-scrollbar {
        display: none;
      }

      .letter-scroll {
        -ms-overflow-style: none; /* IE and Edge */
        scrollbar-width: none; /* Firefox */
      }
    </style>
  </head>
  <body>
    <!-- ëˆˆì†¡ì´ë“¤ -->
    <div id="snowfall"></div>

    <div class="container">
      <!-- íŠ¸ë¦¬ ì´ë¯¸ì§€ (ë‹«íŒ ìƒíƒœ) -->
      <img
        src="christmas-tree.png"
        alt="Christmas Tree"
        class="tree-image"
        id="treeImage"
      />

      <!-- Click Me íŒíŠ¸ -->
      <!-- <div class="click-hint" id="clickHint">LETTER: "Click ME!"</div> -->
      <div class="click-hint" id="clickHint">
        <span style="font-weight: 700; color: #c62836">LETTER:</span>"Click ME!"
      </div>
      <!-- í°ìƒ‰ í¸ì§€ì§€ -->
      <div class="letter-paper" id="letterPaper">
        <div class="letter-border-bottom"></div>
        <div class="letter-scroll" id="letterScroll">
          <div class="letter-content">
            <h3>Dearest Peter,</h3>
            <br /><br />
            <p>
              ì–´ë•Œ. ì¢€ ë†€ëë‚˜?
              <br />
              <br />
              ë‚˜ë„ ë„¤ ë•ë¶„ì— ì›¹
              <span style="font-size: 0.7em; color: #747474"
                >(NOT web shooters)</span
              >ë„ ë§Œì ¸ë³´ê³ .
              <br />
              ì–´ë µì§„ ì•Šì•˜ì–´. ì „í˜€. ë‚´ ì‹¤ë ¥ ì•Œì–ì•„?
              <br />
              ìš´ ì¢‹ê²Œë„ í¸ì§€ë¥¼ ë‹¬ ë§Œí•œ íŠ¸ë¦¬ë„ ì—†ì—ˆì§€.
              <br />
              ì§ì ‘ ì°¾ì•„ê°€ ì£¼ëŠ” ì„œë¹„ìŠ¤ëŠ” ë„¤ê°€ ì²˜ìŒì´ì•¼. ê·¸ë¦¬ê³  ë§ˆì§€ë§‰ì´ê³ .
              <br />
              ê·¸ëŸ¬ë‹ˆ ë„Œ ì¦ê¸°ë©´ ë¼.
            </p>
            <br />
            <p>
              ì‚¬ì‹¤ëŒ€ë¡œ ë§í•˜ìë©´,
              <br />
              í¬ë¦¬ìŠ¤ë§ˆìŠ¤ëŠ” í•‘ê³„ê³  ê·¸ëƒ¥ í¸ì§€ ì¨ì£¼ê³  ì‹¶ê¸´ í–ˆë‹¤.
              <br />
              ëª¨ë‘ê°€ ê·¸ëŸ° ë§ˆìŒì´ê² ì§€. ì—°ë§ì´ë‹ˆê¹Œ ëª¨ë‘ ë“¤ë– ìˆê³ . ë‚˜ë„ ê·¸ë ‡ê³ .
              ë§ˆì¹¨ ë‚´ ê³ì—ëŠ” ë„¤ê°€ ìˆê³ . ê·¸ëŸ¬ë‹ˆ ë‚´ ë“¤ëœ¬ ê¸°ë¶„ì„ ë„¤ê²Œë„ ë‚˜ëˆ ì£¼ê³ 
              ì‹¶ì–´ì„œ.
            </p>
            <br />
            <p>
              ë‚´ê°€ í•˜ëŠ” ì• ì • í‘œí˜„ì€ ì´ëŸ° ê±°ì•¼. ì¢‹ì•„í•˜ë©´ ë¬¼ì§ˆì ì¸ ê²ƒë“¤ì„ ê³„ì†í•´ì„œ
              ì£¼ê³  ì‹¶ê±°ë“ . ì„ ë¬¼ì„ ì‚¬ì£¼ê±°ë‚˜, ë¬´ì–¸ê°€ë¥¼ ë§Œë“¤ì–´ì£¼ê±°ë‚˜, í¸ì§€ë¥¼
              ì¨ì£¼ê±°ë‚˜. ê³µí†µì ì€ ëª¨ë‘ ë„¤ê°€ ì›ƒëŠ” ì–¼êµ´ì´ ë³´ê³  ì‹¶ë‹¤, ì •ë„ê² ë„¤.
              <br /><br />
              ë„·í”Œë¦­ìŠ¤ êµ¬ë…ê¶Œë„ ê·¸ë ‡ê³  ì´ˆì½œë¦¿ë„ ê·¸ë ‡ê³ . ë‚œ ëŠ˜ ë„ˆì—ê²Œ ë­”ê°€ë¥¼
              í•´ì£¼ê³  ì‹¶ì—ˆëŠ”ë°.
              <br />
              ì´ì œ ê·¸ ì´ìœ ë¥¼ ì•Œê² ë”ë¼.
              <br />
              ì¢‹ì•„í•´ì„œ ê·¸ëŸ° ê±°ì˜€ì–´. í”¼í„°, ë„ ì¢‹ì•„í•´ì„œ.
            </p>
            <br />
            <p>
              ì „ì— ë§í–ˆì–ì•„. ë‚œ ë„¤ê°€ ë‚˜ë³´ë‹¤ ë” ë‚˜ì€ ì‚¬ëŒì´ ë˜ê¸¸ ë°”ë€ë‹¤ê³ .
              <br />
              ê¸€ì„, ì§€ê¸ˆ ìƒê°í•´ ë³´ë©´ ì˜ ëª¨ë¥´ê² ì–´.
              <br />
              ë‚œ ë„¤ê°€ í‰ë²”í•œ ì‚¬ëŒì´ë©´ ì¢‹ê² ê±°ë“ . ë„Œ ë‚  ì¢‹ì€ ì‚¬ëŒì´ ë˜ê³  ì‹¶ê²Œ
              ë§Œë“œë‹ˆê¹Œ, ë„Œ ê·¸ëƒ¥ í‰ë²”í•œ ì‚¬ëŒ í•˜ëŠ” ê±°ì§€.
              <br /><br />
              ê°€ë” ìš°ìš¸í•˜ê³ , ê°€ë” í–‰ë³µí•œ ì‚¬ëŒ.
              <br /><br />
              ë„ˆë¬´ ìš°ìš¸í•´ë„ ë‚  ë¶€ë¥´ê³  ë„ˆë¬´ í–‰ë³µí•´ë„ ë‚  ë¶ˆëŸ¬ì•¼ í•´.
              <br />
              ì–¸ì œë“  ë„¤ ì´ì•¼ê¸°ì— ê·€ë¥¼ ê¸°ìš¸ì—¬ì¤„ ë„¤ ìŠ¤íƒ€í¬ ì”¨ê°€ ì—¬ê¸° ìˆì–ì•„. ì•„ì£¼
              ì˜¤ë«ë™ì•ˆ ë²„ì “ì´ ê³ì— ìˆì—ˆì§€.
            </p>
            <br />
            <p>
              ë„Œ ë‚  ìê¾¸ ë‹¤ì •í•˜ë‹¤ê³  ë§í•˜ëŠ”ë°, ê·¸ëŸ° ì ì„ ì•Œì•„ë´ ì£¼ëŠ” ë„¤ê°€ ë”
              ë‹¤ì •í•˜ë‹¤ê³ . ì´ëŸ° ë‹¤ì •í•œ ì‚¬ëŒì´ ì–´ë–»ê²Œ ë‚´ ì• ì¸ì¸ ê±´ì§€. ê°€ë”
              ë†€ë€ë‹¤ë‹ˆê¹Œ. ë„ˆë¬´ ì¢‹ì•„ì„œ. ë‚´ê°€ ì¸ìƒì„ ì•„ì£¼ ì—´ì‹¬íˆ ì‚´ì•˜ë˜ ê±°ê² ì§€.
              ê¹œì°í•œ í”¼í„°ë¥¼, ê¹œì°í•œ ë„ˆë¥¼ ì• ì¸ìœ¼ë¡œ ë‘ê³ .
            </p>
            <br />
            <p>
              ì‚¬ë‘í•œë‹¤ëŠ” ë‹¨ì–´ë§Œìœ¼ë¡œëŠ” ë‚´ ì• ì •ì„ ë‹¤ ëª» ë‹´ì•„. ì¢€ ë” íŠ¹ë³„í–ˆìœ¼ë©´
              ì¢‹ê² ê±°ë“ . ê·¸ë˜ì„œ......
            </p>

            <p style="text-align: center; font-weight: 500">
              'ë‚œ ë„ˆì˜ ìœ ì¼í•œ ì‚¬ëŒì´ ë˜ê³  ì‹¶ì–´.'
            </p>

            <p>
              ì´ ì •ë„ë©´ ë˜ë ¤ë‚˜ ëª¨ë¥´ê² ë„¤. ì•„ë¬´íŠ¼ ê·¸ë ‡ë‹¤ê³ .
              <br />
              <br />
              ì‚¬ë‘í•´, í”¼í„°. ë‚˜ì˜ ìœ ì¼í•œ í”¼í„°.
            </p>

            <div class="signature">
              Always yours,
              <br />
              T
            </div>
            <br /><br />
            <p>P.S. ë„¤ê²Œ í¸ì§€ ì“°ëŠ” ì‹œê°„ì¡°ì°¨ ì¦ê²ë”ë¼.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- ì˜¤ë””ì˜¤ í”Œë ˆì´ì–´ -->
    <audio id="bgMusic" loop>
      <source src="cherry.mp3" type="audio/mpeg" />
    </audio>
    <div class="audio-control" id="audioControl"></div>

    <script>
      // Roboto í°íŠ¸ ë¡œë“œ
      const link = document.createElement("link");
      link.href =
        "https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap";
      link.rel = "stylesheet";
      document.head.appendChild(link);

      // ëˆˆ ë‚´ë¦¬ëŠ” íš¨ê³¼
      function createSnowflakes() {
        const snowfall = document.getElementById("snowfall");
        const snowflakes = ["â„", "â…", "â†", "âœ»", "âœ¼"];

        for (let i = 0; i < 70; i++) {
          const snowflake = document.createElement("div");
          snowflake.className = "snowflake";
          snowflake.textContent =
            snowflakes[Math.floor(Math.random() * snowflakes.length)];
          snowflake.style.left = Math.random() * 100 + "%";
          snowflake.style.animationDuration = Math.random() * 6 + 6 + "s";
          snowflake.style.animationDelay = Math.random() * 5 + "s";
          snowflake.style.fontSize = Math.random() * 12 + 12 + "px";
          snowflake.style.opacity = Math.random() * 0.6 + 0.4;
          snowfall.appendChild(snowflake);
        }
      }

      // ë³€ìˆ˜ ì„ ì–¸
      const treeImage = document.getElementById("treeImage");
      const letterPaper = document.getElementById("letterPaper");
      const letterScroll = document.getElementById("letterScroll");
      const bgMusic = document.getElementById("bgMusic");
      const audioControl = document.getElementById("audioControl");
      const clickHint = document.getElementById("clickHint");
      let isPlaying = false;
      let clicked = false;
      let isLetterOpen = false;

      // ìŒì•… ìë™ ì¬ìƒ - ì—¬ëŸ¬ ë°©ë²• ì‹œë„ (ëª¨ë°”ì¼ ë¸Œë¼ìš°ì € í¬í•¨)
      function tryAutoPlay() {
        // ë°©ë²• 1: ì¦‰ì‹œ ì¬ìƒ ì‹œë„
        const playPromise = bgMusic.play();

        if (playPromise !== undefined) {
          playPromise
            .then(() => {
              // ìë™ ì¬ìƒ ì„±ê³µ
              isPlaying = true;
              audioControl.classList.remove("muted");
            })
            .catch(() => {
              // ìë™ ì¬ìƒ ì‹¤íŒ¨ - ì‚¬ìš©ì ì¸í„°ë™ì…˜ ëŒ€ê¸°
              isPlaying = false;
              audioControl.classList.add("muted");

              // ì²« í´ë¦­/í„°ì¹˜ ì‹œ ì¬ìƒ
              const playOnInteraction = () => {
                bgMusic
                  .play()
                  .then(() => {
                    isPlaying = true;
                    audioControl.classList.remove("muted");
                  })
                  .catch(() => {});
                document.removeEventListener("click", playOnInteraction);
                document.removeEventListener("touchstart", playOnInteraction);
              };

              document.addEventListener("click", playOnInteraction);
              document.addEventListener("touchstart", playOnInteraction);
            });
        }
      }

      // í˜ì´ì§€ ë¡œë“œ ì¦‰ì‹œ ì¬ìƒ ì‹œë„
      setTimeout(tryAutoPlay, 100);

      // ìŠ¤í¬ë¡¤ ê°ì§€ - í…Œë‘ë¦¬ ë™ì  í‘œì‹œ/ìˆ¨ê¹€
      letterScroll.addEventListener("scroll", function () {
        const scrollTop = this.scrollTop;
        const scrollHeight = this.scrollHeight;
        const clientHeight = this.clientHeight;
        const scrollBottom = scrollHeight - scrollTop - clientHeight;

        // ìœ„ì—ì„œ 5px ì´ìƒ ë‚´ë ¤ì˜¤ë©´ ìƒë‹¨ í…Œë‘ë¦¬ ìˆ¨ê¹€
        if (scrollTop > 5) {
          letterPaper.classList.add("scrolled-top");
        } else {
          letterPaper.classList.remove("scrolled-top");
        }

        // ì•„ë˜ì—ì„œ 5px ì´ìƒ ì˜¬ë¼ì˜¤ë©´ í•˜ë‹¨ í…Œë‘ë¦¬ ìˆ¨ê¹€
        if (scrollBottom > 5) {
          letterPaper.classList.add("scrolled-bottom");
        } else {
          letterPaper.classList.remove("scrolled-bottom");
        }
      });

      // íŠ¸ë¦¬ í´ë¦­ ì´ë²¤íŠ¸
      treeImage.addEventListener("click", function () {
        if (!clicked) {
          clicked = true;

          // Click Me íŒíŠ¸ ìˆ¨ê¸°ê¸°
          clickHint.classList.add("hidden");

          // 1. íŠ¸ë¦¬ ì´ë¯¸ì§€ë¥¼ christmas-tree-open.pngë¡œ ë¶€ë“œëŸ½ê²Œ ì „í™˜
          this.classList.add("fade-out");

          setTimeout(() => {
            this.src = "christmas-tree-open.png";
            this.classList.remove("fade-out");

            // 1.5ì´ˆ í›„ì— í¸ì§€ì§€ ë“±ì¥
            setTimeout(() => {
              // ìŠ¤í¬ë¡¤ì„ ë§¨ ìœ„ë¡œ ë¦¬ì…‹
              letterScroll.scrollTop = 0;

              // í…Œë‘ë¦¬ ìƒíƒœ ì´ˆê¸°í™”
              letterPaper.classList.remove("scrolled-top");
              letterPaper.classList.remove("scrolled-bottom");

              letterPaper.classList.add("show");
              isLetterOpen = true;
            }, 1500);
          }, 1000);
        }
      });

      // í¸ì§€ì§€ ë°”ê¹¥ ì˜ì—­ í´ë¦­ ì‹œ ë‹«ê¸°
      document.addEventListener("click", function (e) {
        if (
          isLetterOpen &&
          !letterPaper.contains(e.target) &&
          e.target !== treeImage &&
          e.target !== audioControl
        ) {
          // í¸ì§€ì§€ ë‹«ê¸°
          letterPaper.classList.remove("show");
          isLetterOpen = false;

          // íŠ¸ë¦¬ë¥¼ ë‹«íŒ ìƒíƒœë¡œ ë˜ëŒë¦¬ê¸°
          setTimeout(() => {
            treeImage.classList.add("fade-out");
            setTimeout(() => {
              treeImage.src = "christmas-tree.png";
              treeImage.classList.remove("fade-out");
              clicked = false;

              // Click Me íŒíŠ¸ ë‹¤ì‹œ ë³´ì´ê¸°
              clickHint.classList.remove("hidden");
            }, 1000);
          }, 500);
        }
      });

      // í¸ì§€ì§€ ë‚´ë¶€ í´ë¦­ ì‹œ ì´ë²¤íŠ¸ ì „íŒŒ ë°©ì§€
      letterPaper.addEventListener("click", function (e) {
        e.stopPropagation();
      });

      // í¸ì§€ì§€ ìŠ¤í¬ë¡¤ ì˜ì—­ í„°ì¹˜ ì‹œ ì´ë²¤íŠ¸ ì „íŒŒ ë°©ì§€
      letterScroll.addEventListener("touchstart", function (e) {
        e.stopPropagation();
      });

      // ì˜¤ë””ì˜¤ ì»¨íŠ¸ë¡¤ - ë²„íŠ¼ í´ë¦­í–ˆì„ ë•Œë§Œ on/off
      audioControl.addEventListener("click", function (e) {
        e.stopPropagation();

        if (isPlaying) {
          // ìŒì•… ë„ê¸°
          bgMusic.pause();
          this.classList.add("muted");
          isPlaying = false;
        } else {
          // ìŒì•… ì¼œê¸°
          bgMusic.play().catch((err) => {
            console.log("ìŒì•… ì¬ìƒ ì‹¤íŒ¨:", err);
          });
          this.classList.remove("muted");
          isPlaying = true;
        }
      });

      // ì´ˆê¸°í™”
      createSnowflakes();
    </script>
  </body>
</html>
